<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script type="text/javascript" src="yeu_cau_6_tack1.js"></script>
</head>
<body>
<script>
    let regexEmail = /^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/
    let regexBirthday = /^\d{2}[./-]\d{2}[./-]\d{4}$/;
    let regexCMND = /^[\d]{8,8}$/;
    let listCustomers = [];

    function displayMainMenu() {
        let choose = parseInt(prompt("1.Add New Customer" + "\n" +
            "2.Display total pays Customer" + "\n" +
            "3.Display Information Customer" + "\n" +
            "4.Edit Information Customer" + "\n" +
            "5.Delete Customer"));
        switch (choose) {
            case 1: {
                addNewCustomer();
                break;
            }
            case 2: {
                displayTotalPays();
                break;
            }
            case 3: {
                displayInformationCustomer();
                break;
            }
            case 4: {
                displayEditInformationCustomer();
                break;
            }
            case 5: {
                deleteCustomer();
            }

            default: {
                alert("không hợp lệ")
            }
        }
    }

    function deleteCustomer() {
        let temp = "";
        for (let j = 0; j < listCustomers.length; j++) {
            temp += (j + 1) + ". tenKhachHang:   " + listCustomers[j].getName() + "\n";
        }
        let chosseDelete = parseInt(prompt(temp));
        let check = confirm("bạn có thực sự muốn xóa không")
        if (check === true) {
            listCustomers.splice(chosseDelete, 1)
            alert("xóa thành công")
        } else {
            alert("bạn đã hủy")
        }
        displayMainMenu()
    }


    function displayEditInformationCustomer() {
        let temp = "";
        for (let j = 0; j < listCustomers.length; j++) {
            temp += (j + 1) + ". tenKhachHang:   " + listCustomers[j].getName() + "\n";
        }
        let chosseDisplay = parseInt(prompt(temp));
        let chonMucEdit = parseInt(prompt(
            "1.tên:  " + listCustomers[chosseDisplay].getName() + "\n" +
            "2.cmnd:  " + listCustomers[chosseDisplay].getCMND() + "\n" +
            "3.ngày sinh:  " + listCustomers[chosseDisplay].getBirthday() + "\n" +
            "4.email:  " + listCustomers[chosseDisplay].getEmail() + "\n" +
            "5.địa chỉ:  " + listCustomers[chosseDisplay].getAddress() + "\n" +
            "6.loại customer:  " + listCustomers[chosseDisplay].getTypeCustomer() + "\n" +
            "7.giảm giá:  " + listCustomers[chosseDisplay].getDiscount() + "\n" +
            "8.số lượng đi kèm:  " + listCustomers[chosseDisplay].getQuantityIncluded() + "\n" +
            "9.số ngày thuê:  " + listCustomers[chosseDisplay].getRentDay() + "\n" +
            "10.loại dịch vụ:  " + listCustomers[chosseDisplay].getTypeService() + "\n" +
            "11.loại phòng:  " + listCustomers[chosseDisplay].getTyperoom() + "\n"));

        switch (chonMucEdit) {
            case 1:
                listCustomers[chosseDisplay].setName(prompt("Nhập tên mới:"));
                break;
            case 2:
                listCustomers[chosseDisplay].setCMND(prompt("Nhập số cmnd"));
                break;
            case 3:
                listCustomers[chosseDisplay].setBirthday(prompt("Nhập ngày sinh mới:"));
                break;
            case 4:
                listCustomers[chosseDisplay].setEmail(prompt("Nhập email mới:"));
                break;
            case 5:
                listCustomers[chosseDisplay].setAddress(prompt("Nhập địa chỉ mới:"));
                break;
            case 6:
                listCustomers[chosseDisplay].setTypeCustomer(prompt("loại customer:"));
                break;
            case 7:
                listCustomers[chosseDisplay].setDiscount(prompt("giảm giá:"));
                break;
            case 8:
                listCustomers[chosseDisplay].setQuantityIncluded(prompt("số lượng đi kèm:"));
                break;
            case 9:
                listCustomers[chosseDisplay].setRentDay(prompt("số ngày thuê:"));
                break;
            case 10:
                listCustomers[chosseDisplay].setTypeService(prompt("loại dịch vụ:"));
                break;
            case 11:
                listCustomers[chosseDisplay].setTyperoom(prompt("loại phòng thuê:"));
                break;
            default: {
                alert("Failed");
            }
        }
        alert("1.họ và tên:  " + listCustomers[chosseDisplay].getName()
            + "\n 2.số cmnd:  " + listCustomers[chosseDisplay].getCMND()
            + "\n 3.ngày tháng năm sinh:  " + listCustomers[chosseDisplay].getBirthday()
            + "\n 4.email:  " + listCustomers[chosseDisplay].getEmail()
            + "\n 5.địa chỉ:  " + listCustomers[chosseDisplay].getAddress()
            + "\n 6.loại customer:  " + listCustomers[chosseDisplay].getTypeCustomer()
            + "\n 7.giảm giá:  " + listCustomers[chosseDisplay].getDiscount()
            + "\n 8.số lượng đi kèm:  " + listCustomers[chosseDisplay].getQuantityIncluded()
            + "\n 9.số ngày thuê:  " + listCustomers[chosseDisplay].getRentDay()
            + "\n 10.loại dịch vụ:  " + listCustomers[chosseDisplay].getTypeService()
            + "\n 11.loại phòng thuê:  " + listCustomers[chosseDisplay].getTyperoom());
        displayMainMenu()
    }


    function displayInformationCustomer() {
        let temp = "";
        for (let j = 0; j < listCustomers.length; j++) {
            temp += (j + 1) + ". tenKhachHang:   " + listCustomers[j].getName() + "\n";
        }
        let chosseDisplay = parseInt(prompt(temp));
        alert(
            "tên:  " + listCustomers[chosseDisplay].getName() + "\n" +
            "cmnd:  " + listCustomers[chosseDisplay].getCMND() + "\n" +
            "ngày sinh:  " + listCustomers[chosseDisplay].getBirthday() + "\n" +
            "email:  " + listCustomers[chosseDisplay].getEmail() + "\n" +
            "địa chỉ:  " + listCustomers[chosseDisplay].getAddress() + "\n" +
            "loại customer:  " + listCustomers[chosseDisplay].getTypeCustomer() + "\n" +
            "giảm giá:  " + listCustomers[chosseDisplay].getDiscount() + "\n" +
            "số lượng đi kèm:  " + listCustomers[chosseDisplay].getQuantityIncluded() + "\n" +
            "số ngày thuê:  " + listCustomers[chosseDisplay].getRentDay() + "\n" +
            "loại dịch vụ:  " + listCustomers[chosseDisplay].getTypeService() + "\n" +
            "loại phòng:  " + listCustomers[chosseDisplay].getTyperoom() + "\n")
        displayMainMenu()
    }


    function addNewCustomer() {
        let cus = new Customer();
        let checkValid = false;
        let tenKhachHang = prompt("họ và tên");
        let soCMND;
        let ngaySinh;
        let email;
        do {
            soCMND = prompt("số cmnd");
            if (regexCMND.test(soCMND)) {
                checkValid = true;
            } else alert("CMND không hợp lệ vui lòng nhập lại")
        } while (!checkValid);
        checkValid = false;
        do {
            ngaySinh = prompt("ngày tháng năm sinh");
            if (regexBirthday.test(ngaySinh)) {
                checkValid = true;
            } else alert("ngày sinh không hợp lệ vui lòng nhập lại")
        } while (!checkValid);
        checkValid = false;
        do {
            email = prompt("email");
            if (regexEmail.test(email)) {
                checkValid = true;
            } else alert("email không hợp lệ vui lòng nhập lại")
        } while (!checkValid);
        checkValid = false;
        let diaChi = prompt("địa chỉ");
        let loaiCustomer = prompt("loại customer");
        let giamGia = parseFloat(prompt("giảm giá"));
        let soLuongDiKem = parseFloat(prompt("số lượng đi kèm"));
        let soNgayThue = parseFloat(prompt("Số ngày thuê"));
        let loaiDichVu = prompt("loại dịch vụ", "");
        let loaiPhongThue = prompt("loại phòng thuê");
        cus.setName(tenKhachHang);
        cus.setBirthday(ngaySinh);
        cus.setCMND(soCMND);
        cus.setEmail(email);
        cus.setAddress(diaChi);
        cus.setTypeService(loaiDichVu);
        cus.getTyperoom(loaiPhongThue);
        cus.setTypeCustomer(loaiCustomer);
        cus.setDiscount(giamGia);
        cus.setQuantityIncluded(soLuongDiKem);
        cus.setRentDay(soNgayThue);
        listCustomers.push(cus);
        alert("Đã thêm thành công");
        displayMainMenu()
    }

    function displayTotalPays() {
        let temp = "";
        for (let j = 0; j < listCustomers.length; j++) {
            temp += (j + 1) + ". tenKhachHang:   " + listCustomers[j].getName() + "\n";
        }
        let chosseDisplay = parseInt(prompt(temp));
        alert("tông tiền là:  " + listCustomers[chosseDisplay].TotalPays())
    }

    displayMainMenu()
</script>
</body>
</html>